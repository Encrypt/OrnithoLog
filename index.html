<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>OrnithoLog -- Un framework de Logging</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand"><a href="#">OrnithoLog</a></li>
                <li><a href="#intro">Introduction</a></li>
                <li><a href="#api">API</a>
                    <ul>
                        <li><a href="#log-level">Niveaux de logging</a></li>
                        <li><a href="#log-format">Format des logs</a></li>
                        <li><a href="#log-target">Cibles des logs</a></li>
                    </ul>
                </li>
                <li><a href="#config">Configuration du framework</a>
                    <ul>
                        <li><a href="#fram-methods">Méthodes fournies</a></li>
                        <li><a href="#properties">Fichier .properties</a></li>
                    </ul>
                </li>
                <li><a href="#uml">Diagramme UML</a></li>
                <li><a href="#credits">Credits</a>
                    <ul>
                        <li><a href="#licence">Licence</a></li>
                        <li><a href="#authors">Auteurs</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">

                        <div style="text-align: center;">
                            <img src="https://drive.google.com/uc?export=view&#38;id=0B31-CIvNW1LdVFJrMUZIOHBueVU" width="200px">
                        </div>

                        <h1 id="intro">Introduction</h1>

                        <p><strong>OrnithoLog</strong> est un <strong>framework de logging</strong>, dont le but est de mettre à disposition un système simple pour <strong>gérer les messages d’erreur</strong> et comprendre le flux d’exécution d’un programme.</p>

                        <br />
                        
                        <h1 id="api">API</h1>

                            <h2>Récupération d'un objet Logger</h2>
                            <p>Les objets Logger sont associé à la classe qui va les utiliser, il y a donc un objet Logger par classe qui produit des logs. Cela permet de pouvoir mieux configurer la façon dont les logs sont formattés et enregistrés.</p>

                            <p>Pour récupérer l'objet Logger associés à une classe, il faut faire appel à la méthode statique <code>getLogger</code> de la classe <code>LoggerFactory</code>, en lui passant en paramètre le nom de la classe appelante. Exemple:</p>

                            <div class="highlight">
                                <pre>
                                    <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger(this.getClass().getName());</code>
                                </pre>
                            </div>

                            <p>Si le logger associé à la classe appelante existe déjà, le <code>LoggerFactory.getLogger()</code>va le retourner, et s'il n'existe pas, il sera crée.</p>

                            <h2 id="log-level">Niveau des logs</h2>
                            <p>Notre framework distingue 4 niveaux de log et présente une hiérarchie :</p>
                            <ul>
                                <li><strong>ERROR :</strong> Au niveau le plus haut, cette configuration enregistre les logs d'erreur.</li>
                                <li><strong>WARN :</strong> En dessous, cette configuration enregistre les logs d'avertissement et d'erreur.</li>
                                <li><strong>INFO :</strong> Encore en-dessous, cette configuration enregistre les logs d'information, d'avertissement et d'erreur.</li>
                                <li><strong>DEBUG :</strong> Enfin, cette dernière configuration enregistre les logs de débogage, d'information, d'avertissement et d'erreur. <strong>Valeur par défaut</strong>.</li>
                            </ul>

                            <p>Pour logguer un message, il faut faire appel à la méthode <code>.debug("message")</code>, <code>.info("message")</code>, <code>.warn("message")</code> ou <code>.error("message")</code> de l'instance Logger.</p>
                            <p>Le message peut bien contenir des variables à afficher et le fonctionnement est similaire à l'appel de <code>System.out.println()</code>.</p>

                            <p>Exemple:</p>
                            <div class="highlight">
                                <pre>
                                    <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger(this.getClass().getName());
logger.info("ceci est un message informatif");  // sera enregistré car le niveau de log par défaut est DEBUG
logger.setLevel(LogLevel.WARN);             // on change le niveau de filtrage des logs à WARN
logger.debug("ceci est message de debug");  // ne sera pas enregistré car on n'affiche que les messages de niveau WARN ou supérieur
logger.error("ceci est un message s'erreur");  // sera enregistré car ERROR est encore plus important que WARN</code>
                                </pre>
                            </div>
                            <br />
                            
                            <h2 id="log-format">Format des logs</h2>
                            
                                <h3>Loggueurs fournis avec le Framework</h3>
                                <p>Notre framework est livré avec 3 formatteurs de logs, disponibles dans le package <code>com.github.encrypt.ornitholog.formatters</code> :</p>
                                <ul>
                                    <li><strong>DateFormatter :</strong> Ce formatteur renvoie la date courante du système afin d'avoir des logs datés.</li>
                                    <li><strong>LevelFormatter :</strong> Ce formatteur renvoie le niveau actuel du loggueur passé en paramètre.</li>
                                    <li><strong>ClassFormatter :</strong> Ce formatteur renvoie la classe du loggueur passé en paramètre.</li>
                                </ul>
                                
                                <h3>Créer un nouveau formatteur</h3>
                                <p>Vous êtes libres de créer un nouveau formatteur ! Pour cela, il suffit de créer une classe héritant de LogFormatter et de lui donner le comportement désiré.</p>
                                <p>Vérifiant l'<a href="http://en.wikipedia.org/wiki/Open/closed_principle">Open-Closed Principle</a>, il est aisé d'ajouter des fonctionnalités au framework.</p>
                                
                                <h3>Faire appel aux formatteurs</h3>
                                <p>Le formattage des logs a été pensé suivant le <b>design pattern "Decorator"</b>.</p>
                                <p>Pour faire appel aux formatteurs, il faut donc les chaîner en les imbriquants les uns dans les autres.</p>
                                <p><u>Exemple d'appel :</u></p>
                                <div class="highlight">
                                    <pre>
                                        <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger("MaClasse");
<b>logger.setFormatter(new DateFormatter(new LevelFormatter(new ClassFormatter())));</b></code>
                                    </pre>
                                </div>
                                <br />
                                

                            <h2 id="log-target">Cible des logs</h2>
                            <p>Un même message peut donner lieu à plusieurs cibles et trois sont fournies avec ce framework.</p>
                            <p>Toutes les cibles héritent de la classe LogTarget et suivant le principe OCP il est donc facile d'ajouter vos propres cibles.</p>
                            
                                <h3>Console</h3>
                                <p>La première cible fournie est la console, qui est un niveau basique.</p>
                                <p>Son utilisation est simple, il n'y a aucun paramètre à lui passer.</p>
                                
                                <p><u>Exemple :</u></p>
                                <div class="highlight">
                                    <pre>
                                        <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger("MaClasse");
<b>logger.addTarget(new LogToConsole());</b></code>
                                    </pre>
                                </div>
                                
                                <h3>Fichier plat</h3>
                                <p>Une autre cible fournie est l'écriture des logs dans un fichier plat.</p>
                                <p>Pour l'utiliser, il faut faire appel à LogToFile en passant en paramètre le chemin vers le fichier d'enregistrement.</p>
                                <p>Cette cible possède également la méthode <code>setTargetFile(String targetFile)</code> permettant de créer l'objet LogToFile sans lui passer de chemin dans un premier temps.</p>
                                <p><u>Exemple :</u></p>
                                <div class="highlight">
                                    <pre>
                                        <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger("MaClasse");

LogToFile myTarget = new LogToFile();
myTarget.setTargetFile("/path/to/my/file");
logger.addTarget(myTarget);

<i>-- OU --</i>

logger.addTarget(new LogToFile("/path/to/my/file"));</code>
                                    </pre>
                                </div>
                                
                                <h3>Fichier rotatif</h3>
                                <p></p>
                                <p>Enfin, la dernière cible fournie permet l'écriture des logs dans un fichier rotatif.</p>
                                <p>Son mode de fonctionnement est similaire à celui du fichier plat, hormis le fait que son constructeur prend en second paramètre la taille cible maximale, en <u>octets</u>.</p>
                                <p>En plus de la méthode <code>setTargetFile(String targetFile)</code>, la méthode <code>setMaxFileSize(double maxFileSize)</code> vous permet de spécifier la taille maximale du fichier cible ultérieurement.</p>
                                <p><u>Exemple :</u></p>
                                <div class="highlight">
                                    <pre>
                                        <code class="language-java" data-lang="java">
Logger logger = LoggerFactory.getLogger("MaClasse");

LogToRotatingFile myTarget = new LogToRotatingFile("/path/to/my/file", 1024000.0);
myTarget.setTargetFile("/path/to/my/file");
myTarget.setMaxFileSize(1024000.0);
logger.addTarget(myTarget);

<i>-- OU --</i>

logger.addTarget(new LogToRotatingFile("/path/to/my/file", 1024000.0));</code>
                                    </pre>
                                </div>
                        <br />

                        <h1 id="config">Configuration des Loggers</h1>
                        
                            <h2 id="fram-methods">Méthodes fournies</h2>
                            <p>Plusieurs méthodes sont fournies pour configurer les instances de Logger :</p>
                            <ul>
                                <li><code>addTarget(LogTarget target)</code>: Permet d'ajouter une cible de logging.</li>
                                <li><code>setFormatter(LogFormatter formatter)</code>: Permet de spécifier le formattage des logs en suivant le design pattern "Decorator".</li>
                                <li><code>setLevel(LogLevel level)</code>: Permet de définir le niveau de logs du Logger.</li>
                                <li><code>getLevel()</code>: Permet de récupérer le niveau d'alerte du Logger.</li>
                            </ul>
                            <br />
                            
                            <h2 id="properties">Fichier .properties</h2>
                            <p>Afin de créer automatiquement les instances de Logger et ne plus avoir à paramétrer une instance manuellement, il est possible de renseigner ses paramètres dans un fichier .properties, à mettre à la racine du projet utilisant le framework.</p>
                            <p>Pour ce faire, les paramètres doivent être sous la forme suivante : <code>package.class:attribute = valeur</code>.</p>

                            <ul>
                                <li><code>package.class</code>: le nom de la classe à laquelle est affecté le Logger</li>
                                <li><code>attribute</code>: l'attribut auquel on veut affecter une valeur</li>
                                <li><code>valeur</code>: la valeur que l'on va affecter à l'attribut</li>
                            </ul>

                            <p>Remarque: il est possible d'affecter des valeurs aà des attributs d'attributs, par exemple: <code>package.class:attribute1.attribute2 = valeur</code>.</p>

                            <p><u>Exemple de configuration :</u></p>
                            <div class="highlight">
                                <pre>
<code class="language-java" data-lang="java">
com.myProject.MyClass:level = DEBUG
com.myProject.MyClass:formatter = DateFormatter
com.myProject.MyClass:target1 = LogToConsole
com.myProject.MyClass:target2 = LogToFile
com.myProject.MyClass:target2.path = "path/to/my/file"
com.myProject.MyClass:target3 = LogToRotatingFile
com.myProject.MyClass:target3.path = "path/to/my/other/file"
com.myProject.MyClass:target3.maxSize = 102400.0</code>
                                </pre>
                            </div>
                        <br />

                        <h1 id="uml">Diagramme UML</h1>

                        <p>TODO: mettre une image du diagramme UML.</p>

                        <br />

                        <h1 id="credits">Credits</h1>
                        
                            <h2 id="licence">Licence</h2>
                            <p>Nous livrons ce framework sous licence GPL.</p>
                            <p>Vous êtes libre de modifier, copier et redistribuer ce programme.</p>
                            <p>Plus d'informations sur la licence à l'adresse : <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a></p>

                            <h2 id="authors">Auteurs</h2>

                            <ul>
                                <li>Vincent Marquet</li>
                                <li>Patrick Pereira Almeida</li>
                                <li>Yann Privé</li>
                            </ul>
                            <p>Étudiants à l'ESIEA Paris en 4A, année 2014/2015.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <a href="https://github.com/encrypt/OrnithoLog">
        <img
        style="position: absolute; top: 0; right: 0; border: 0;"
        src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
        data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
